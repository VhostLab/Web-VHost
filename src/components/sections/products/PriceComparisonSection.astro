---
// src/components/PriceComparisonSection.astro
---

<section class="py-12 md:py-20 bg-[#0b0b0b]">
  <div class="container mx-auto px-4 md:px-6">
    <h2
      class="text-3xl md:text-[48px] font-poppins font-bold text-center text-white mb-3 md:mb-4"
    >
      Comparativa de Precios de Hosting
    </h2>
    <p class="text-center text-gray-300 text-sm md:text-base mb-8 md:mb-10">
      Precio/GB de RAM (€) de los principales proveedores de hosting de
      Minecraft.
    </p>

    <div class="hidden md:block space-y-6 max-w-4xl mx-auto">
      {
        [
          { name: "GG Servers", price: 5.58, logo: "/images/ggserver.webp" },
          { name: "Shockbyte", price: 3.51, logo: "/images/shockbyte.avif" },
          {
            name: "Apex Hosting",
            price: 2.64,
            logo: "/images/apexhosting.avif",
          },
          {
            name: "BisectHosting",
            price: 2.63,
            logo: "/images/bisecthosting.avif",
          },
          { name: "Hostinger", price: 1.25, logo: "/images/hostinger.webp" },
          { name: "Vhost", price: 0.75, logo: "/images/vhostlogo.webp" },
        ].map((item) => {
          const maxPrice = 5.58;
          const widthPercent = Math.round((item.price / maxPrice) * 100);
          const isVhost = item.name === "Vhost";

          return (
            <div class="flex items-center">
              {/* Logo + Name */}
              <div class="w-48 flex items-center space-x-6 mr-8">
                {/* MODIFICADO: Ya no hay glow de fondo, solo la imagen limpia */}
                <img
                  src={item.logo}
                  alt={`${item.name} logo`}
                  class={`w-10 h-10 object-contain object-center ${
                    !isVhost ? "filter grayscale" : ""
                  }`}
                  loading="lazy"
                />
                <span class="font-medium text-white">{item.name}</span>
              </div>

              {/* Price Bar Container (El glow se mantiene AQUÍ en la barra) */}
              <div
                class={`flex-1 h-8 rounded-lg mr-8 relative ${
                  isVhost ? "bg-secondary/20" : "bg-[#2a2a2a] overflow-hidden"
                }`}
              >
                {/* EFECTO GLOW DE LA BARRA (Solo Vhost) */}
                {isVhost && (
                  <div
                    class="absolute top-0 left-0 h-full bg-secondary/60 blur-md rounded-lg z-0"
                    style={`width: ${widthPercent}%;`}
                  />
                )}

                {/* La barra real */}
                <div
                  class={`h-full rounded-lg relative z-10 ${
                    isVhost ? "bg-secondary" : "bg-gray-500 filter grayscale"
                  }`}
                  style={`width: ${widthPercent}%;`}
                />
              </div>

              {/* Price Text */}
              <div class="w-28 text-right text-sm text-gray-300">
                €{item.price.toFixed(2)} /GB RAM
              </div>
            </div>
          );
        })
      }
    </div>

    <div class="md:hidden grid grid-cols-2 gap-4 max-w-md mx-auto">
      {
        [
          { name: "GG Servers", price: 5.58, logo: "/images/ggserver.webp" },
          { name: "Shockbyte", price: 3.51, logo: "/images/shockbyte.avif" },
          {
            name: "Apex Hosting",
            price: 2.64,
            logo: "/images/apexhosting.avif",
          },
          {
            name: "BisectHosting",
            price: 2.63,
            logo: "/images/bisecthosting.avif",
          },
          { name: "Hostinger", price: 1.25, logo: "/images/hostinger.webp" },
          { name: "Vhost", price: 0.75, logo: "/images/vhostlogo.webp" },
        ].map((item) => {
          const maxPrice = 5.58;
          const heightPercent = Math.round((item.price / maxPrice) * 100);
          const isVhost = item.name === "Vhost";

          return (
            <div
              class={`rounded-lg p-4 flex flex-col items-center ${
                isVhost
                  ? "bg-secondary/10 border-2 border-secondary"
                  : "bg-[#1a1a1a] border border-gray-700"
              }`}
            >
              {/* Logo - MODIFICADO (Sin glow) */}
              <img
                src={item.logo}
                alt={`${item.name} logo`}
                class={`w-12 h-12 object-contain mb-2 ${
                  !isVhost ? "filter grayscale" : ""
                }`}
                loading="lazy"
              />

              {/* Name */}
              <span
                class={`font-semibold text-xs mb-2 text-center ${
                  isVhost ? "text-secondary" : "text-white"
                }`}
              >
                {item.name}
              </span>

              {/* Vertical Bar Container */}
              <div
                class={`w-8 h-32 rounded-full mb-2 flex flex-col-reverse relative ${
                  isVhost ? "bg-secondary/20" : "bg-[#2a2a2a] overflow-hidden"
                }`}
              >
                {/* EFECTO GLOW BARRA VERTICAL (Solo Vhost) */}
                {isVhost && (
                  <div
                    class="absolute bottom-0 w-full bg-secondary/60 blur-md rounded-full z-0"
                    style={`height: ${heightPercent}%;`}
                  />
                )}

                {/* La barra real */}
                <div
                  class={`w-full rounded-full relative z-10 ${
                    isVhost ? "bg-secondary" : "bg-gray-500 filter grayscale"
                  }`}
                  style={`height: ${heightPercent}%;`}
                />
              </div>

              {/* Price */}
              <div
                class={`text-sm font-bold ${
                  isVhost ? "text-secondary" : "text-gray-300"
                }`}
              >
                €{item.price.toFixed(2)}
              </div>
              <div class="text-[10px] text-gray-400">/GB RAM</div>
            </div>
          );
        })
      }
    </div>
  </div>
</section>
